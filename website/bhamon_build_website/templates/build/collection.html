{% extends 'layout.html' %}
{% import 'build/macros.html' as build_macros %}
{% import 'macros.html' as shared_macros %}

{% block content %}
<h1>Builds</h1>
<section>
	<div class="table-container">
		<form action="{{ url_for('build_collection_index') }}" method="get">
			<ul>
				<li>
					<label for="job">Job</label>
					<select name="job">
						<option></option>
						{% for job in job_collection %}
							{% if request.args.get('job') == job['identifier'] %}
						<option selected>{{ job['identifier'] }}</option>
							{% else %}
						<option>{{ job['identifier'] }}</option>
							{% endif %}
						{% endfor %}
					</select>
				</li>
				<li>
					<label for="worker">Worker</label>
					<select name="worker">
						<option></option>
						{% for worker in worker_collection %}
							{% if request.args.get('worker') == worker['identifier'] %}
						<option selected>{{ worker['identifier'] }}</option>
							{% else %}
						<option>{{ worker['identifier'] }}</option>
							{% endif %}
						{% endfor %}
					</select>
				</li>
				<li>
					<label for="status">Status</label>
					<select name="status">
						<option></option>
						{% for status in status_collection %}
							{% if request.args.get('status') == status %}
						<option selected>{{ status }}</option>
							{% else %}
						<option>{{ status }}</option>
							{% endif %}
						{% endfor %}
					</select>
				</li>
				<li>
					<button type="submit">Apply filters</button>
				</li>
			</ul>
		</form>
		{{ build_macros.build_table(build_collection) }}
		{{ shared_macros.page_navigation('build_collection_index', pagination) }}
	</div>
</section>
{% endblock %}
